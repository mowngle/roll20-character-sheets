<table>
   
<!-- top block -->
<tr><td colspan=2>
  <table width=100%>
    <tr>
      <td> <b>Name</b>
      <input style="height: 2em;" type=text width=50 name="attr_name" /></td>
      
      
    </tr>
    <tr>
      <td> <b>Character Rank</b><br>
      <input type=number style="height: 2em; width: 4em; margin-right: 3em;" name="attr_cr" value="1" /></td>
      <td> <b>Race</b><div class="tooltip" style=" margin-left: 0.5em;"><p style=" height: 15px; width: 15px; text-align: center; background-color: #4F2F15; color: white; border: 1px solid #4F2F15; border-radius: 10px; font-size: 75%;">?</p>
        <span class="tooltiptext" style="width: 20em;">Each character gets 5 bonus points that they can add to their base stats (Strength, Dexterity, Power or Intelligence). However, at Rank 1 no stat can be higher than 7. If you choose Human you also get an additional +1 bonus to two stats of your choice. You cannot add them to the same stat.</span>
      </div>
      <select type=text style="width: 10em; margin-right: 3em; margin-top: -0.5em;" name="attr_race">
        <option value="0">---</option>
        <option value="1">Human</option>
        <option value="2">Elf</option>
        <option value="3">Dwarf</option>
        <option value="4">Half-Alv</option>
        <option value="5">Werecat</option>
        <option value="6">Wolf Fang</option>
        <option value="7">Fox Tail</option>
        <option value="8">Race of Ritual</option>
      </select>
      </td>
      <input type="hidden" name="attr_raceSTRbonus" value="0">
      <input type="hidden" name="attr_raceDEXbonus" value="0">
      <input type="hidden" name="attr_racePOWbonus" value="0">
      <input type="hidden" name="attr_raceINTbonus" value="0">
      <input type="hidden" name="attr_raceHPbonus" value="0">
      <input type="hidden" name="attr_raceFateBonus" value="0">

      <td> <b>Class</b>
      <select type=text style="width: 10em; margin-right: 3em;"  name="attr_class">
        <option value="0">---</option>
        <option value="1">Guardian</option>
        <option value="2">Samurai</option>
        <option value="3">Monk</option>
        <option value="4">Cleric</option>
        <option value="5">Druid</option>
        <option value="6">Kannagi</option>
        <option value="7">Assassin</option>
        <option value="8">Swashbuckler</option>
        <option value="9">Bard</option>
        <option value="10">Sorcerer</option>
        <option value="11">Summoner</option>
        <option value="12">Enchanter</option>
      </select></td>
      <input type="hidden" name="attr_classSTRbonus" value="0">
      <input type="hidden" name="attr_classDEXbonus" value="0">
      <input type="hidden" name="attr_classPOWbonus" value="0">
      <input type="hidden" name="attr_classINTbonus" value="0">
      <input type="hidden" name="attr_classHPbonus" value="0">
      <input type="hidden" name="attr_classHPmod" value="0">
      <td><b>Subclass</b>
      <input type=text style="height: 2em; width: 10em; margin-right: 3em;"  name="attr_subClass" /></td>
    </tr>
  </table>
</tr>

<tr><td valign=top>
<!-- column 1 -->

  <div class=formblock>
    <table width=100%>
      <thead>
      <tr>
        <td>---</td>
        <td width=1>Bonus</td>
        <td width=1>Total</td>
        <td width=1>Modifier</td>
      </tr>
      </thead>
      <tr>
        <td><b>Strength</b></td>
        <td><input type=number width=4 style='width: 4em;' name="attr_STR" value="0"/></td>
        <td><input type=number width=4 style='width: 3em;' name="attr_STRtotal" value=(((@{STR}+@{cr})-1)+@{classSTRbonus}+@{raceSTRbonus}) disabled="disabled"/></td>
        <td><input type=number width=4 style='width: 3em;' name="attr_STRmod" value=((@{STRtotal}-(@{STRtotal}%3))/3) disabled="disabled"/>
        </td>
        <td>
          <div class="tooltip">
          <input style="margin-left: -1.5em;" type="radio" name="attr_modRadio" value="@{STRmod}" checked="true">
          <span class="tooltiptext">Mark your highest stat. If it's a draw, pick whichever.</span>
          </div>
        </td>
      </tr>
      <tr>
        <td><b>Dexterity</b></td>
        <td><input type=number width=4 style='width: 4em;' name="attr_DEX" value="0" /></td>
        <td><input type=number width=4 style='width: 3em;' name="attr_DEXtotal" value=(((@{DEX}+@{cr})-1)+@{classDEXbonus}+@{raceDexBonus}) disabled="disabled"/></td>
        <td><input type=number width=4 style='width: 3em;' name="attr_DEXmod" value=((@{DEXtotal}-(@{DEXtotal}%3))/3) disabled="disabled"/>
        </td>
        <td>
          <div class="tooltip">
          <input style="margin-left: -1.5em;" type="radio" name="attr_modRadio" value="@{DEXmod}">
        <span class="tooltiptext">Mark your highest stat. If it's a draw, pick whichever.</span>
      </div>
      </td>
      </tr>
      <tr>
        <td><b>Power</b></td>
        <td><input type=number width=4 style='width: 4em;' name="attr_POW" value="0" /></td>
        <td><input type=number width=4 style='width: 3em;' name="attr_POWtotal" value=(((@{POW}+@{cr})-1)+@{classPOWbonus}+@{racePOWbonus}) disabled="disabled"/></td>
        <td><input type=number width=4 style='width: 3em;' name="attr_POWmod" value=((@{POWtotal}-(@{POWtotal}%3))/3) disabled="disabled"/>
        </td>
        <td>
        <div class="tooltip">
        <input style="margin-left: -1.5em;" type="radio" name="attr_modRadio" value="@{POWmod}">
        <span class="tooltiptext">Mark your highest stat. If it's a draw, pick whichever.</span>
      </div>
        </td>
      </tr>
        <tr>
        <td><b>Intelligence</b></td>
        <td><input type=number width=4 style='width: 4em;' name="attr_INT" value="0" /></td>
        <td><input type=number width=4 style='width: 3em;' name="attr_INTtotal" value=(((@{INT}+@{cr})-1)+@{classINTbonus}+@{raceINTbonus}) disabled="disabled"/></td>
        <td><input type=number width=4 style='width: 3em;' name="attr_INTmod" value=((@{INTtotal}-(@{INTtotal}%3))/3) disabled="disabled"/>
        </td>
        <td><div class="tooltip">
        <input style="margin-left: -1.5em;" type="radio" name="attr_modRadio" value="@{INTmod}">
        <span class="tooltiptext">Mark your highest stat. If it's a draw, pick whichever.</span>
      </div>
        </td>
      </tr>

       <!-- <input type="hidden" disabled="true" name="attr_max_xy" value="(((@{STRmod} + @{DEXmod}) + abs(@{STRmod} - @{DEXmod})) / 2)" />
        <input type="hidden" disabled="true" name="attr_max_xyz" value="(((@{max_xy} + @{POWmod}) + abs(@{max_xy} - @{POWmod})) / 2)" />
        <input type="hidden" disabled="true" name="attr_maxMod" value="(((@{max_xyz} + @{INTmod}) + abs(@{max_xyz} - @{INTmod})) / 2)" />-->

    </table>
    <table style="margin-top: 2em;">

        <tr>
           <td> --- </td>
           <td><b>Bonus</b></td>
        </tr>

        <tr>
            <td><b>Initiative</b></td>
            <td><input name="attr_initiativeBonus" type="text" width=4 style='width: 4em;' value="0"></td>
            <td><button type=roll value="&{template:default} {{name=Initiative}} {{Roll=[[2d6+@{STRmod}+@{INTmod}+@{initiativeBonus} &{tracker}]]}}"></button></td>
        </tr>
        <tr>
            <td><b>Evasion</b></td>
            <td><input name="attr_evasionBonus" type="text" width=4 style='width: 4em;' value="0"></td>
            <td><button type=roll value="&{template:default} {{name=Evasion}} {{Roll=[[1d6+@{penaltyDie}+@{DEXmod}+@{evasionBonus} ]]}}"></button></td>
        </tr>
        <tr>
            <td><b>Resistance</b></td>
            <td><input name="attr_resistanceBonus" type="text" width=4 style='width: 4em;' value="0"></td>
            <td><button type=roll value="&{template:default} {{name=Resistance}} {{Roll=[[1d6+@{penaltyDie}+@{POWmod}+@{resistanceBonus} ]]}}"></button></td>
        </tr>
        
        <tr style="margin-top: 2em;">
            <td><b>Accuracy</b></td>
            <td><input name="attr_accuracyBonus" type="text" width=4 style='width: 4em;' value="0"></td>
            <td><button type=roll value="&{template:default} {{name=Accuracy}} {{Roll=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio} ]]}}"></button><div class="tooltip" style="margin-left: 0.5em;"><p style=" height: 15px; width: 15px; text-align: center; background-color: #4F2F15; color: white; border: 1px solid #4F2F15; border-radius: 10px; font-size: 75%;">?</p>
              <span class="tooltiptext" style="width: 30em;">If you want to add an Accuracy roll to a custom Skill Check simply include @{accuracy} in the Custom Check input. If you want to add a bonus to the accuracy that only applies to one Skill, you need to add it as a Custom Check with brackets, like this:<br> [[ @{accuracy} +1 ]]</span>
            </div>
            </td>
            <input type="hidden" name="attr_accuracy" value="[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]]">
            
        </tr>
    </table>
    
  </div>

</td><td valign=top>
<!-- column 2 -->

  <div class=sheet-formblock>
      <p style="margin-left: 7em; margin-bottom: -0.3em;"><b>Bonus &nbsp; &nbsp; Current  &nbsp; &nbsp; Max</b></p>

    <table width=98%%>

    <tr>
    <td> <b>HP</b></td>
    <td>
      <input name="attr_HPbonus" style="width: 4em;" type="number" value="0">
      <input name="attr_HP" style="width: 4em;" type="number" value="0">
      <input name="attr_HP_max" style="width: 4em;" type="number" disabled="disabled" value=@{classHPbonus}+(@{classHPmod}*(@{cr}-1))+@{raceHPbonus}+@{HPbonus}-@{fatigue}>
    </td>
    </tr>

    <tr>
      <td> <b>Fate Points</b></td>
      <td>
      <input name="attr_fateBonus" style="width: 4em;" type="number" value="0">
      <input name="attr_fate" style="width: 4em;" type="number" value="0">
      <input name="attr_fate_max" style="width: 4em;" type="number" disabled="disabled" value=@{fateBonus}+@{raceFateBonus}>
    </td>
    </tr>

    </table>

  </div>

  <div class=sheet-formblock>
      <p style="margin-left: 11em; margin-bottom: -0.3em;"><b>Bonus &nbsp; &nbsp; Total</b></p>

    <table width=100%>


    <tr>
      <td>  <b>Physical Defense</b></td>
      <td>
        <input name="attr_PDEFbonus" style="width: 4em;" type="number" value="0">
        <input name="attr_PDEFtotal" style="width: 4em;" type="number" value=(@{STRmod}*2)+@{PDEFbonus} disabled="disabled">
    </td>
    </tr>
    <tr>
      <td>  <b>Magical Defense</b></td>
      <td>
        <input name="attr_MDEFbonus" style="width: 4em;" type="number" value="0">
        <input name="attr_MDEFtotal" style="width: 4em;" type="number" value=(@{INTmod}*2)+@{MDEFbonus} disabled="disabled">
    </td>
    </tr>

    </table>

  </div>

  <div class=sheet-formblock>
  <p style="margin-left: 11.5em; margin-bottom: -0.3em;"><b>Total</b></p>
    <table width=88%> 

    <tr>
      <td><b style="margin-left: 2em; margin-bottom: 0.4em;">Speed</b></td>
      <td>
      <input style="margin-bottom: 0.4em;" name="attr_speed" style="width: 3em;" type="number" placeholder="2">
      </td>
    </tr>

    <tr>
      <td><b style="margin-left: 2em;">Attack Power</b></td>
      <td>
      <input name="attr_attack" style="width: 4em;" type="number" value="0"><div class="tooltip" style="margin-left: 0.5em;"><p style=" height: 15px; width: 15px; text-align: center; background-color: #4F2F15; color: white; border: 1px solid #4F2F15; border-radius: 10px; font-size: 75%;">?</p>
  <span class="tooltiptext">If you want to add your Attack Power to a damage roll, simply add @{attack} in the Damage/Healing input. For example: 2d6+@{attack}</span>
</div>
      </td>
    </tr>

    <tr>
      <td><b style="margin-left: 2em;">Magic Power</b></td>
      <td>
      <input name="attr_magic" style="width: 4em;" type="number" value="0"><div class="tooltip" style="margin-left: 0.5em;"><p style=" height: 15px; width: 15px; text-align: center; background-color: #4F2F15; color: white; border: 1px solid #4F2F15; border-radius: 10px; font-size: 75%;">?</p>
  <span class="tooltiptext">If you want to add your Magic Power to a damage or healing roll, simply add @{magic} in the Damage/Healing input. For example: 2d6+@{magic}</span>
</div>
      </td>
    </tr>

    <tr>
      <td><b style="margin-left: 2em;">Recovery</b></td>
      <td>
      <input name="attr_recovery" style="width: 3em;" type="number" value="0"><div class="tooltip" style="margin-left: 1.5em;"><p style=" height: 15px; width: 15px; text-align: center; background-color: #4F2F15; color: white; border: 1px solid #4F2F15; border-radius: 10px; font-size: 75%;">?</p>
        <span class="tooltiptext">If you want to add your Recovery to a healing roll, simply add @{recovery} in the Damage/Healing input. For example: 2d6+@{recovery}</span>
      </div>
      </td>
    </tr>

    <tr>
      <td><b style="margin-left: 2em; margin-bottom: 0.4em;">Hate</b></td>
      <td>
      <input name="attr_hate" style="width: 3em; margin-bottom: 0.4em;" type="number" value="0">
      </td>
    </tr>

    <tr>
      <td><b style="margin-left: 2em;">Fatigue</b></td>
      <td>
      <input name="attr_fatigue" style="width: 3em;" type="number" value="0">
      </td>
    </tr>

    </table>

  </div>

</td></tr>
<br>

<tr><td valign=top colspan=2>
  <div class="cDiv" style=" max-width: 65em; margin-bottom: 1em;">
  <b>Combat Skills</b><div class="tooltip" style="margin-left: 1.5em;"><p style=" height: 15px; width: 15px; text-align: center; background-color: #4F2F15; color: white; border: 1px solid #4F2F15; border-radius: 10px; font-size: 75%;">?</p>
        <span class="tooltiptext" style="width: 40em;">Each Class starts with 3 "automatic" Skills listed in their respective categories in the Skill list. You also start with 3 Combat Skills and 1 General Skill from amongst the Archetype, Main Class, Race, and Common Skill lists. From CR 2-10 you can acquire or Rank up (increase SR) 2 Combat Skills and 1 General Skill after you gain a Character Rank. From CR 11, and above, you gain 1 Combat Skill and 1 General Skill.</span>
      </div>
  <br>
  
  <fieldset class=repeating_cSkills>
  <div class="repeatingcDiv" style="background-color: #7ACA67; margin-bottom: 0.5em;">
    <button type=roll value="&{template:default} {{name=@{cName}}} @{cCostCB} @{cTimingCB} @{cTargetCB} @{cRangeCB} @{cLimitCB} @{cCheck} @{cAddCB} {{Effect=@{cEffect}}}"></button>
    <input type=text name=attr_cName placeholder="Name" style='width: 20em;height:1.5em;'>
    <input type="checkbox" name="cCondenseCB" class="cCondenseCB" checked="true" /> Condense
    <br>
    <div class="cProperties" style="overflow: hidden;">

    <div class="cPropertyDivs" style="width: 3em;">
      <input type=number name=attr_SR value="1" style='margin-top: 1.5em; width: 100%; height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%; margin-top: -1em; margin-left:1em;'>SR</b>
    </div>

    <div class="cPropertyDivs" style="width: 6em;">
      <input style='margin-left: 2.5em;' type='checkbox' name='attr_ccostCB' value='{{Cost=@{cCost}}}' checked="true" /><br>
      <input type=text name=attr_cCost placeholder="0 Hate" style='width: 100%; height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;  margin-top: -1em; margin-left:2em;'>Cost</b>
    </div>

    <div class="cPropertyDivs">
      <input style='margin-left: 2em;' type='checkbox' name='attr_cTargetCB' value='{{Target=@{cTarget}}}' checked="true" /><br>
      <input type=text name=attr_cTarget style='width: 5em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;   margin-top: -1em; margin-left:1.5em;'>Target</b>
    </div>

    <div class="cPropertyDivs">
      <input style='margin-left: 2em;' type='checkbox' name='attr_cTimingCB' value='{{Timing=@{cTiming}}}' checked="true" /><br>
      <input type=text name=attr_cTiming style='width: 5em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;   margin-top: -1em; margin-left:1em;'>Timing</b>
    </div>

    <div class="cPropertyDivs">
      <input style='margin-left: 1.5em;' type='checkbox' name='attr_cRangeCB' value='{{Range=@{cRange}}}' checked="true" /><br>
      <input type=text name=attr_cRange style='width: 4em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;   margin-top: -1em; margin-left:1em;'>Range</b>
    </div>

    <div class="cPropertyDivs">
      <input style='margin-left: 2em;' type='checkbox' name='attr_cLimitCB' value='{{Limit=@{cLimit}}}' checked="true" /><br>
      <input type=text name=attr_cLimit style='width: 6em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;   margin-top: -1em; margin-left:2em;'>Limit</b>
    </div>

    <div class="cPropertyDivs">
      <select name=attr_cCheck style='width: 8em; height:2em; position: absolute;'>
      <option value="">None</option>
      <option value="{{Accuracy=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]] vs. Evasion}}{{Damage=[[@{cDamage}]]}}">Acc vs Eva</option>
      <option value="{{Accuracy=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]] vs. Resistance}}{{Damage=[[@{cDamage} ]]}}">Acc vs Res</option>
      <option value="{{Accuracy=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]] vs. Evasion}}">Acc vs Eva (no damage)</option>
      <option value="{{Accuracy=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]] vs. Resistance}}">Acc vs Res (no damage)</option>
      <option value="{{Check=Auto}} {{Damage=[[@{cDamage} ]]}}">Auto</option>
      <option value="{{Healing=[[@{cDamage} ]]}}">Healing</option>
      <option value="{{Check=[[@{cCustomCheck}]]}}">Custom</option>
      <option value="{{Check=[[@{cCustomCheck}]]}} {{Damage=[[@{cDamage} ]]}}">Custom w/ Damage</option>
    </select><br>
    <input type=text name=attr_cCustomCheck placeholder="Custom Check" style='margin-top: 0.7em; width: 8em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%; margin-top: -1.3em; margin-left:3em;'>Check</b>
    </div>
    <div class="cPropertyDivs">

      <div class="tooltip2" style="margin-left: 4.5em;"><p style=" height: 15px; width: 15px; text-align: center; background-color: #4F2F15; color: white; border: 1px solid #4F2F15; border-radius: 10px; font-size: 75%;">?</p>
        <span class="tooltiptext2">You can substitute attributes such as Attack/Magic Power or the skill's SR into the roll by typing in @{attribute}. For example: @{SR}d6 + @{magic} In this example you roll a number of dice equal to the skill's SR and then add your Magic Power afterwards.</span>
      </div>
      <br>
      <input type=text placeholder="0d6+0" name=attr_cDamage style='width: 11em; height:1.5em; margin-top: -1.2em;'><br>
      <b style='display: inline-block; font-size: 75%; position: absolute; margin-top: -0.7em; margin-left:2.5em;'>Damage / Healing</b>
    </div>
    <div class="cPropertyDivs">
      <input style='margin-left: 4.5em;' type='checkbox' name='attr_cAddCB' value='{{Additional Properties=@{cAdd}}}' /><br>
      <input type=text name=attr_cAdd placeholder="Training, Prep, etc." style='width: 10.5em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%; margin-top: -1em; margin-left:1.5em; '>Additional Properties</b>
    </div>

    <br>
    <textarea name=attr_cEffect placeholder="Effect" style='width: 10em;height:5em;'></textarea>
    </div>
    </div>
  </fieldset>
  </div>

</td></tr>
<!--#58A6E8-->
<tr><td valign=top colspan=2>
  <div class="gDiv" style="max-width: 65em; margin-bottom: 2em;">
  <b>General Skills</b>
  <br>
  
  <fieldset class=repeating_generalSkills>
  <div class="repeatinggDiv" style="background-color: #58A6E8; margin-bottom: 0.5em;">
    <button type=roll value="&{template:default} {{name=@{gName}}} @{gCostCB} @{gTimingCB} @{gTargetCB} @{gRangeCB} @{gLimitCB} @{gCheck} @{gAddCB} {{Effect=@{gEffect}}}"></button>
    <input type=text name=attr_gName placeholder="Name" style='width: 20em;height:1.5em;'>
    <input type="checkbox" name="gCondenseCB" class="gCondenseCB" checked="true" /> Condense
    <br>
    <div class="gProperties" style="overflow: hidden;">

    <div class="gPropertyDivs" style="width: 3em;">
      <input type=number name=attr_SR value="1" style='margin-top: 1.5em; width: 100%; height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%; margin-top: -1em; margin-left:1em;'>SR</b>
    </div>

    <div class="gPropertyDivs" style="width: 6em;">
      <input style='margin-left: 2.5em;' type='checkbox' name='attr_gcostCB' value='{{Cost=@{gCost}}}' checked="false" /><br>
      <input type=text name=attr_gCost placeholder="0 Hate" style='width: 100%; height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;  margin-top: -1em; margin-left:2em;'>Cost</b>
    </div>

    <div class="gPropertyDivs">
      <input style='margin-left: 2em;' type='checkbox' name='attr_gTargetCB' value='{{Target=@{gTarget}}}' checked="true" /><br>
      <input type=text name=attr_gTarget style='width: 5em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;   margin-top: -1em; margin-left:1.5em;'>Target</b>
    </div>

    <div class="gPropertyDivs">
      <input style='margin-left: 2em;' type='checkbox' name='attr_gTimingCB' value='{{Timing=@{gTiming}}}' checked="true" /><br>
      <input type=text name=attr_gTiming style='width: 5em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;   margin-top: -1em; margin-left:1em;'>Timing</b>
    </div>

    <div class="gPropertyDivs">
      <input style='margin-left: 1.5em;' type='checkbox' name='attr_gRangeCB' value='{{Range=@{gRange}}}' checked="false" /><br>
      <input type=text name=attr_gRange style='width: 4em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;   margin-top: -1em; margin-left:1em;'>Range</b>
    </div>

    <div class="gPropertyDivs">
      <input style='margin-left: 2em;' type='checkbox' name='attr_gLimitCB' value='{{Limit=@{gLimit}}}' checked="false" /><br>
      <input type=text name=attr_gLimit style='width: 6em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%;   margin-top: -1em; margin-left:2em;'>Limit</b>
    </div>

    <div class="gPropertyDivs">
      <select name=attr_gCheck style='width: 8em; height:2em; position: absolute;'>
      <option value="">None</option>
      <option value="{{Accuracy=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]] vs. Evasion}}{{Damage=[[@{gDamage}]]}}">Acc vs Eva</option>
      <option value="{{Accuracy=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]] vs. Resistance}}{{Damage=[[@{gDamage} ]]}}">Acc vs Res</option>
      <option value="{{Accuracy=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]] vs. Evasion}}">Acc vs Eva (no damage)</option>
      <option value="{{Accuracy=[[1d6+@{penaltyDie}+@{accuracyBonus}+@{modRadio}]] vs. Resistance}}">Acc vs Res (no damage)</option>
      <option value="{{Check=Auto}} {{Damage=[[@{gDamage} ]]}}">Auto</option>
      <option value="{{Healing=[[@{gDamage} ]]}}">Healing</option>
      <option value="{{Check=[[@{gCustomCheck}]]}}">Custom</option>
      <option value="{{Check=[[@{gCustomCheck}]]}} {{Damage=[[@{gDamage} ]]}}">Custom w/ Damage</option>
    </select><br>
      <input type=text name=attr_gCustomCheck placeholder="Custom Check" style='margin-top: 0.7em; width: 8em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%; margin-top: -1.3em; margin-left:3em;'>Check</b>
    </div>
    <div class="gPropertyDivs">

      <div class="tooltip2" style="margin-left: 4.5em;"><p style=" height: 15px; width: 15px; text-align: center; background-color: #4F2F15; color: white; border: 1px solid #4F2F15; border-radius: 10px; font-size: 75%;">?</p>
        <span class="tooltiptext2">You can substitute attributes such as Attack/Magic Power or the skill's SR into the roll by typing in @{attribute}. For example: @{SR}d6 + @{magic} In this example you roll a number of dice equal to the skill's SR and then add your Magic Power afterwards.</span>
      </div>
      <br>
      <input type=text placeholder="0d6+0" name=attr_gDamage style='width: 11em; height:1.5em; margin-top: -1.2em;'><br>
      <b style='display: inline-block; font-size: 75%; position: absolute; margin-top: -0.6em; margin-left:2.5em;'>Damage / Healing</b>
    </div>
    <div class="gPropertyDivs">
      <input style='margin-left: 4.5em;' type='checkbox' name='attr_gAddCB' value='{{Additional Properties=@{gAdd}}}' /><br>
      <input type=text name=attr_gAdd placeholder="Training, Prep, etc." style='width: 10.5em;height:1.5em;'><br>
      <b style='display: inline-block; font-size: 75%; margin-top: -1em; margin-left:1.5em;'>Additional Properties</b>
    </div>

    <br>
    <textarea name=attr_gEffect placeholder="Effect" style='width: 10em;height:5em;'></textarea>
    </div>
    </div>
  </fieldset>
  </div>

</td></tr>

<tr><td valign=top>
<!-- column 1 -->

  <div class=formblock>
    <b>Equipment</b>
    <br>
    <br>
    <b>Hand</b><br>
    <div>
      <input style="width: 70%;" type="text" name="attr_hand1"><input type="checkBox" class="eCondenseCB" name="eCondenseCB" checked="true">
      <textarea class="hiddenDesc" name="attr_hand1Desc" placeholder="Description, Stats"></textarea>
    </div>
    <b>Hand</b><br>
    <div>
    <input style="width: 70%;" type="text" name="attr_hand2"><input type="checkBox" class="eCondenseCB" name="eCondenseCB" checked="true">
        <textarea class="hiddenDesc" name="attr_hand2Desc" placeholder="Description, Stats"></textarea>
    </div>
    <b>Armor</b><br>
    <div>
    <input style="width: 70%;" type="text" name="attr_armor"><input type="checkBox" class="eCondenseCB" name="eCondenseCB" checked="true">
    <textarea class="hiddenDesc" name="attr_armordesc" placeholder="Description, Stats"></textarea>
    </div>
    <b>Accessories</b><br>
    <div>
    <input style="width: 70%;" type="text" name="attr_accessory1"><input type="checkBox" class="eCondenseCB" name="eCondenseCB" checked="true">
    <textarea class="hiddenDesc" name="attr_accessory1Desc" placeholder="Description, Stats"></textarea>
    </div>

    <div>
    <input style="width: 70%;" type="text" name="attr_accessory2"><input type="checkBox" class="eCondenseCB" name="eCondenseCB" checked="true">
    <textarea class="hiddenDesc" name="attr_accessory2Desc" placeholder="Description, Stats"></textarea>
    </div>

    <div>
    <input style="width: 70%;" type="text" name="attr_accessory3"><input type="checkBox" class="eCondenseCB" name="eCondenseCB" checked="true">
    <textarea class="hiddenDesc" name="attr_accessory3Desc" placeholder="Description, Stats"></textarea>
    </div>
    <b>Bag</b><br>
    <div>
    <input style="width: 70%;" type="text" name="attr_bag"><input type="checkBox" class="eCondenseCB" name="eCondenseCB" checked="true">
    <textarea class="hiddenDesc" name="attr_bagdesc" placeholder="Description, Stats"></textarea>
    </div>
    <b>Gold</b><br>
    <input style="width: 35%;" type="number" name="attr_gold">
    <br>

    <b style="margin-left: 13em;">Current</b><b style="margin-left: 1.3em;">Max</b><br>
    <b>Inventory</b> <input style="width: 3em; margin-left: 8.5em;" type="number" name="attr_inventoryCurrent" value="0"><input style="width: 3em; margin-left: 1em;" type="number" name="attr_inventoryMax" value="7">
    <textarea name="attr_equipment" class="notes" style="margin-top: 0.5em;"></textarea>
  </div>


</td><td valign=top>
<!-- column 2 -->

  <div class=formblock>
    <b>Basic Checks</b><b style="margin-left: 3em; position: absolute;">Bonus</b>
    <table width=80% class=abilities>
      <tbody>
        <tr>
          <td>Athletics</td>
          <td width="1">
            <input name="attr_athleticsBonus" type="text" value="0" placeholder="0d6+0" style="width: 4em;">
          </td>
          <td width="1"><button type=roll value="&{template:default} {{name=Athletics}} {{Roll=[[1d6+@{penaltyDie}+@{STRmod}+@{athleticsBonus}]]}}"></button></td>
        </tr>
        <tr>
          <td>Endurance</td>
          <td><input name="attr_enduranceBonus" type="text" value="0" placeholder="0d6+0" style="width: 4em;"></td>
          <td><button type=roll value="&{template:default} {{name=Endurance}} {{Roll=[[1d6+@{penaltyDie}+@{STRmod}+@{enduranceBonus}]]}}"></button></td>
        </tr>
        <tr>
          <td>Disable</td>
          <td><input name="attr_disableBonus" type="text" value="0" placeholder="0d6+0" style="width: 4em;"></td>
          <td><button type=roll value="&{template:default} {{name=Disable}} {{Roll=[[1d6+@{penaltyDie}+@{DEXmod}+@{disableBonus}]]}}"></button></td>
        </tr>
        <tr>
          <td>Operate</td>
          <td><input name="attr_operateBonus" type="text" value="0" placeholder="0d6+0" style="width: 4em;"></td>
          <td><button type=roll value="&{template:default} {{name=Operate}} {{Roll=[[1d6+@{penaltyDie}+@{DEXmod}+@{operateBonus}]]}}"></button></td>
        </tr>
        <tr>
          <td>Perception</td>
          <td><input name="attr_perceptionBonus" type="text" value="0" placeholder="0d6+0" style="width: 4em;"></td>
          <td><button type=roll value="&{template:default} {{name=Perception}} {{Roll=[[1d6+@{penaltyDie}+@{POWmod}+@{perceptionBonus}]]}}"></button></td>
        </tr>
        <tr>
          <td>Negotiation</td>
          <td><input name="attr_negotiationBonus" type="text" value="0" placeholder="0d6+0" style="width: 4em;"></td>
          <td><button type=roll value="&{template:default} {{name=Negotiation}} {{Roll=[[1d6+@{penaltyDie}+@{POWmod}+@{negotiationBonus}]]}}"></button></td>
        </tr>
        <tr>
          <td>Knowledge</td>
          <td><input name="attr_knowledgeBonus" type="text" value="0" placeholder="0d6+0" style="width: 4em;"></td>
          <td><button type=roll value="&{template:default} {{name=Knowledge}} {{Roll=[[1d6+@{penaltyDie}+@{INTmod}+@{knowledgeBonus}]]}}"></button></td>
        </tr>
          <tr>
          <td>Analyze</td>
          <td><input name="attr_analyzeBonus" type="text" value="0" placeholder="0d6+0" style="width: 4em;"></td>
          <td><button type=roll value="&{template:default} {{name=Analyze}} {{Roll=[[1d6+@{penaltyDie}+@{INTmod}+@{analyzeBonus}]]}}"></button></td>
        </tr>
        
    </tbody>
    </table>
  </div>

  <div class=formblock>
  <br>
  <div class="tooltip2">
    <input type="checkbox" name="attr_penaltyDie" value="1d6" checked="true;"> <b>Uncheck for -1D Penalty</b>
        <span class="tooltiptext2" style="width: 12em;">This affects all rolls that automatically start with 2d6, except for Initiative. <br> Don't forget to re-check it!<br>You can also add this functionality to custom checks by replacing one d6 with @{penaltyDie}</span>
      </div>
    <br>
    <br>
    <br>
    <b>Notes</b>
    <br>
    <textarea name="attr_notes" class="notes"></textarea>
  </div>

</td></tr>

<tr><td colspan=2>
<b>Log Horizon TRPG Sheet</b> v0.1
</td></tr>

</table>

<script type="text/worker">
on('change:class', () => {
    getAttrs(['class'], (values) => {
      const val = parseInt(values['class']);
        let hpBonus;
        let hpModBonus;
        let strBonus;
        let dexBonus;
        let powBonus;
        let intBonus;

        switch (val) {
            case 1:
                hpBonus = 50;
                hpModBonus = 8;
                strBonus = 4;
                dexBonus = 2;
                powBonus = 1;
                intBonus = 3;
                break;

            case 2:
                hpBonus = 50;
                hpModBonus = 8;
                strBonus = 4;
                dexBonus = 2;
                powBonus = 2;
                intBonus = 2;
                break;

            case 3:
                hpBonus = 55;
                hpModBonus = 9;
                strBonus = 4;
                dexBonus = 4;
                powBonus = 2;
                intBonus = 0;
                break;

                case 4:
                hpBonus = 40;
                hpModBonus = 6;
                strBonus = 3;
                dexBonus = 0;
                powBonus = 4;
                intBonus = 3;
                break;

                case 5:
                hpBonus = 35;
                hpModBonus = 5;
                strBonus = 2;
                dexBonus = 1;
                powBonus = 4;
                intBonus = 3;
                break;

                case 6:
                hpBonus = 40;
                hpModBonus = 5;
                strBonus = 1;
                dexBonus = 3;
                powBonus = 4;
                intBonus = 2;
                break;

                case 7:
                hpBonus = 40;
                hpModBonus = 5;
                strBonus = 2;
                dexBonus = 4;
                powBonus = 3;
                intBonus = 1;
                break;

                case 8:
                hpBonus = 40;
                hpModBonus = 6;
                strBonus = 3;
                dexBonus = 4;
                powBonus = 2;
                intBonus = 1;
                break;

                case 9:
                hpBonus = 40;
                hpModBonus = 5;
                strBonus = 2;
                dexBonus = 4;
                powBonus = 2;
                intBonus = 2;
                break;

                case 10:
                hpBonus = 35;
                hpModBonus = 4;
                strBonus = 0;
                dexBonus = 3;
                powBonus = 3;
                intBonus = 4;
                break;

                case 11:
                hpBonus = 35;
                hpModBonus = 5;
                strBonus = 1;
                dexBonus = 3;
                powBonus = 3;
                intBonus = 4;
                break;

                case 12:
                hpBonus = 35;
                hpModBonus = 4;
                strBonus = 2;
                dexBonus = 2;
                powBonus = 2;
                intBonus = 4;
                break;
            default:
                hpBonus = 0;
                hpModBonus = 0;
                strBonus = 0;
                dexBonus = 0;
                powBonus = 0;
                intBonus = 0;
                break;
        }
        setAttrs({
          classHPbonus: hpBonus,
          classHPmod: hpModBonus,
          classSTRbonus: strBonus,
          classDEXbonus: dexBonus,
          classPOWbonus: powBonus,
          classINTbonus: intBonus,

        });
    });
});

on('change:race', () => {
    getAttrs(['race'], (values) => {
      const val = parseInt(values['race']);
        let hpBonus;
        let fateBonus;
        let strBonus;
        let dexBonus;
        let powBonus;
        let intBonus;

        switch (val) {
            case 1:
                hpBonus = 8;
                fateBonus = 1;
                strBonus = 0;
                dexBonus = 0;
                powBonus = 0;
                intBonus = 0;
                break;

            case 2:
                hpBonus = 8;
                fateBonus = 1;
                strBonus = 0;
                dexBonus = 1;
                powBonus = 1;
                intBonus = 0;
                break;

            case 3:
                hpBonus = 16;
                fateBonus = 0;
                strBonus = 1;
                dexBonus = 0;
                powBonus = 1;
                intBonus = 0;
                break;

                case 4:
                hpBonus = 8;
                fateBonus = 1;
                strBonus = 0;
                dexBonus = 1;
                powBonus = 0;
                intBonus = 1;
                break;

                case 5:
                hpBonus = 8;
                fateBonus = 1;
                strBonus = 1;
                dexBonus = 1;
                powBonus = 0;
                intBonus = 0;
                break;

                case 6:
                hpBonus = 16;
                fateBonus = 0;
                strBonus = 2;
                dexBonus = 0;
                powBonus = 0;
                intBonus = 0;
                break;

                case 7:
                hpBonus = 8;
                fateBonus = 1;
                strBonus = 0;
                dexBonus = 0;
                powBonus = 1;
                intBonus = 1;
                break;

                case 8:
                hpBonus = 0;
                fateBonus = 2;
                strBonus = 0;
                dexBonus = 0;
                powBonus = 0;
                intBonus = 2;
                break;

            default:
                hpBonus = 0;
                fateBonus = 0;
                strBonus = 0;
                dexBonus = 0;
                powBonus = 0;
                intBonus = 0;
                break;
        }
        setAttrs({
          raceHPbonus: hpBonus,
          raceFateBonus: fateBonus,
          raceSTRbonus: strBonus,
          raceDEXbonus: dexBonus,
          racePOWbonus: powBonus,
          raceINTbonus: intBonus,

        });
    });
});
</script>
